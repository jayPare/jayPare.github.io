<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.6.4.min.js"
      integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
    ></script>
    <script src="./lib/jquery-csv/src/jquery.csv.min.js"></script>
    <script src="feeCalculator.js"></script>
    <style>
      select:invalid {
        color: grey;
      }
    </style>
    <title>Discogs Fee Calculator</title>
  </head>
  <body
    onload="loadCSV('lib/Woocommerce-US-ZipCodes-TaxRates/tax_rates.csv'); setCountryDD();"
  >
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbar"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse mx-2" id="navbar">
        <div class="navbar-nav">
          <a class="nav-item nav-link" id="home" href="../index.html">Home</a>
        </div>
      </div>
    </nav>

    <form
      class="font-weight-bold mt-3 mx-3"
      id="formCalculate"
      needs-validation
      onsubmit="event.preventDefault(); return calculateFees();"
    >
      <div class="mb-3">
        <label class="font-weight-bold" for="inputItemPrice"
          >Item Price (CAD or USD)</label
        >
        <input
          required
          type="number"
          step="0.01"
          min="0"
          class="form-control"
          id="inputItemPrice"
          aria-describedby=""
          placeholder="Enter item price"
        />
      </div>
      <div class="mb-3">
        <label for="inputShippingPrice">Shipping Price (CAD or USD)</label>
        <input
          required
          type="number"
          step="0.01"
          min="0"
          class="form-control"
          id="inputShippingPrice"
          aria-describedby=""
          placeholder="Enter shipping price"
        />
      </div>
      <div class="mb-3">
        <label for="sourceCountry">You Country</label>
        <select
          class="form-select form-select-md"
          aria-label=".form-select-md example"
          required
          id="ddlSource"
        >
          <option selected disabled value="" style="color: gray">
            Your Country
          </option>
          <option value="United States">United States</option>
          <option value="Canada">Canada</option>
        </select>
      </div>
      <div class="mb-3">
        <label for="destination">Destination Country</label>
        <select
          class="form-select form-select-md"
          aria-label=".form-select-md example"
          required
          id="destination"
          onchange="showState()"
        >
          <option selected disabled value="" style="color: gray">
            Destination Country
          </option>
          <option value="United States">United States</option>
          <option value="Austria">Austria</option>
          <option value="Belgium">Belgium</option>
          <option value="Bulgaria">Bulgaria</option>
          <option value="Canada">Canada</option>
          <option value="Croatia">Croatia</option>
          <option value="Cyprus">Cyprus</option>
          <option value="Czech Republic">Czech Republic</option>
          <option value="Denmark">Denmark</option>
          <option value="Estonia">Estonia</option>
          <option value="Finland">Finland</option>
          <option value="France">France</option>
          <option value="Germany">Germany</option>
          <option value="Greece">Greece</option>
          <option value="Hungary">Hungary</option>
          <option value="Ireland">Ireland</option>
          <option value="Italy">Italy</option>
          <option value="Latvia">Latvia</option>
          <option value="Lithuania">Lithuania</option>
          <option value="Luxembourg">Luxembourg</option>
          <option value="Malta">Malta</option>
          <option value="Netherlands">Netherlands</option>
          <option value="Poland">Poland</option>
          <option value="Portugal">Portugal</option>
          <option value="Romania">Romania</option>
          <option value="Slovakia">Slovakia</option>
          <option value="Slovenia">Slovenia</option>
          <option value="Spain">Spain</option>
          <option value="Sweden">Sweden</option>
          <option value="United Kingdom">United Kingdom</option>
        </select>
      </div>
      <div id="zipCodeFormGroup" class="mb-3 d-none">
        <label for="zipCode">Destination Zip Code</label>
        <input
          oninput="this.setCustomValidity('')"
          type="number"
          class="form-control"
          id="zipCode"
          aria-describedby=""
          placeholder="Enter the destination zip code"
        />
      </div>
      <button class="btn btn-primary">Calculate</button>
    </form>

    <div id="result" class="d-none card mt-3 mx-3">
      <div class="card-body">
        <p class="font-weight-bold lead">You will get:</p>
        <div id="amount"></div>
        <p></p>
        <br />
        <p class="font-weight-bold lead">Here is the breakdown:</p>
        <p>Discogs will take: <span id="discogsCut"></span>.</p>
        <p>
          This is 9% of <span id="discogsTotal"></span> which is item price of
          <span id="itemPrice"></span> + shipping price of
          <span id="shippingPrice"></span>.
        </p>
        <br />
        <p>Paypal will take: <span id="ppCut"></span></p>
        <p>
          This is <span id="ppPerc"></span>% (<span id="ppBasePerc"></span>% of
          base fee rate + <span id="ppSupPerc"></span>% of supplemental fee
          rate) of total transaction amount of
          <span id="totalTransaction"></span>$ +
          <span id="ppFixedFees"></span> of fixed fees.
        </p>
        <br />
        <p>You will get will get: <span id="yourCut"></span>.</p>
        <p>
          Thich is effectively <span id="yourCutPerc"></span>% (<span
            id="feesPerc"
          ></span
          >% of fees) of the total transaction amount of
          <span id="totalTransactionAmount"></span>.
        </p>
      </div>
    </div>
  </body>

  <footer class="mt-4 mx-3">
    <div class="col-xs-12 col-sm-12">
      <div class="alert alert-info" role="alert">
        <b>Info:</b> Currently, only shipping from Canada or United States, with
        CAD or USD currencies are supported. Stay tuned for more origin country
        and other currency support.
      </div>
      <div class="alert alert-warning" role="alert">
        <b>Disclamer:</b> This tool is provided solely for reference purpose. It
        is no in any case related to Discogs.com, neither to Paypal. Amount
        calculated are not guaranteed and are only provided to help. However, if
        you don't get the amount calculated, you can file a bug
        <a href="https://github.com/jayPare/jayPare.github.io/issues/new/choose"
          >here</a
        >.
      </div>
    </div>
  </footer>
</html>
